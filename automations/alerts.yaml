- id: home_assistant_release_alert
  alias: Home Assistant Release Alert
  trigger:
    - platform: state
      entity_id: binary_sensor.home_assistant_website_update_available
      to: 'on'
  action:
    - service: script.announcement
      data:
        service: notify.denys
        title: '–û–Ω–æ–≤–ª–µ–Ω–Ω—è Home Assistant üéâ'
        speak: false
        messages:
          - "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞ –≤–µ—Ä—Å—ñ—è Home Assistant: {{ states('sensor.home_assistant_website') }}."
          - "–†–µ–ª—ñ–∑ –Ω–æ–≤–æ—ó –≤–µ—Ä—Å—ñ—ó Home Assistant: {{ states('sensor.home_assistant_website') }}."
          - "–í–µ—Ä—Å—ñ—è Home Assistant {{ states('sensor.home_assistant_website') }} –≤–∂–µ –¥–æ—Å—Ç—É–ø–Ω–∞!"
        notify_data:
          url: /config/dashboard
          group: system
          actions:
            - action: RELEASE_NOTES
              title: –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–º—ñ–Ω–∏
              uri: "{{ state_attr('sensor.home_assistant_website', 'release_notes') }}"

- id: hacs_releases_alert
  alias: HACS Releases Alert
  trigger:
    - platform: state
      entity_id: sensor.hacs
      to: ~
  condition:
    - condition: numeric_state
      entity_id: sensor.hacs
      above: 0
  action:
    - service: script.announcement
      data:
        service: notify.denys
        title: '–û–Ω–æ–≤–ª–µ–Ω–Ω—è HACS üéâ'
        speak: false
        messages:
          - >-
            –î–æ—Å—Ç—É–ø–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–ª—è {{ states('sensor.hacs') }} –ø–∞–∫–µ—Ç—ñ–≤ –≤ HACS:

            {%- for repo in state_attr('sensor.hacs', 'repositories') %}
              ‚Ä¢ {{ repo.display_name }}: {{ repo.installed_version }} ‚Üí {{ repo.available_version }}
            {%- endfor -%}
          - >-
            HACS –º–∞—î {{ states('sensor.hacs') }} –æ–Ω–æ–≤–ª–µ–Ω—å:

            {%- for repo in state_attr('sensor.hacs', 'repositories') %}
              ‚Ä¢ {{ repo.display_name }}: {{ repo.installed_version }} ‚Üí {{ repo.available_version }}
            {%- endfor -%}
          - >-
            –î–æ—Å—Ç—É–Ω–æ {{ states('sensor.hacs') }} –æ–Ω–æ–≤–ª–µ–Ω—å –≤ HACS:

            {%- for repo in state_attr('sensor.hacs', 'repositories') %}
              ‚Ä¢ {{ repo.display_name }}: {{ repo.installed_version }} ‚Üí {{ repo.available_version }}
            {%- endfor -%}
        notify_data:
          url: /hacs/entry
          group: system
          tag: hacs-updates

- id: home_assistant_start
  alias: Home Assistant Start
  trigger:
    - platform: homeassistant
      event: start
  action:
    - service: script.announcement
      data:
        service: notify.denys
        title: '–ó–∞–ø—É—Å–∫ Home Assistant üè°'
        speak: false
        messages:
          - 'Home Assistant –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–∞–ø—É—â–µ–Ω–æ!'
          - 'Home Assistant —Å—Ç–∞—Ä—Ç—É–≤–∞–≤!'
          - 'Home Assistant –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏!'
        notify_data:
          group: system
          tag: ha-start

- id: system_peaks
  alias: System Peaks Alert
  trigger:
    - platform: numeric_state
      entity_id: sensor.processor_use
      above: 90
      for:
        seconds: 30
      variables:
        greetings:
          - '–ü—Ä–æ—Ü–µ—Å–æ—Ä –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π –Ω–∞ {{ trigger.to_state.state }}%.'
          - '–ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å–æ—Ä {{ trigger.to_state.state }}%.'
          - 'CPU: {{ trigger.to_state.state | int(0) }}%.'
        messages:
          - '–°–∫–ª–∞–¥–Ω–æ—â—ñ –∑ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è.'
          - '–ê–Ω–æ–º–∞–ª—å–Ω–æ –≤–µ–ª–∏–∫–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å–æ—Ä.'
    - platform: numeric_state
      entity_id: sensor.processor_temperature
      above: 80
      for:
        minutes: 30
      variables:
        greetings:
          - '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞ {{ trigger.to_state.state }}¬∞–°.'
          - '–ü—Ä–æ—Ü–µ—Å–æ—Ä –Ω–∞–≥—Ä—ñ–≤—Å—è –¥–æ {{ trigger.to_state.state }}¬∞–°.'
        messages:
          - '–ê–Ω–æ–º–∞–ª—å–Ω–æ –≤–µ–ª–∏–∫–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å–æ—Ä.'
          - '–û—Ö–æ–ª–æ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞ –Ω–µ —Å–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –∑ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º.'
    - platform: numeric_state
      entity_id: sensor.memory_use_percent
      above: 90
      for:
        seconds: 30
      variables:
        greetings:
          - '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞ –ø–∞–º‚Äô—è—Ç—å –∑–∞–ø–æ–≤–Ω–µ–Ω–∞ –Ω–∞ {{ trigger.to_state.state }}%.'
          - '–ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É –ø–∞–º‚Äô—è—Ç—å {{ trigger.to_state.state }}%.'
          - 'RAM: {{ trigger.to_state.state }}%.'
        messages:
          - '–°–∫–ª–∞–¥–Ω–æ—â—ñ –∑ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è.'
          - '–ê–Ω–æ–º–∞–ª—å–Ω–æ –≤–µ–ª–∏–∫–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å–æ—Ä.'
    - platform: numeric_state
      entity_id: sensor.disk_use_percent
      above: 90
      for:
        minutes: 1
      variables:
        greetings:
          - '–°–∏—Å—Ç–µ–º–Ω–∏–π –¥–∏—Å–∫ –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π –Ω–∞ {{ trigger.to_state.state }}%.'
          - '–ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –¥–∏—Å–∫—É {{ trigger.to_state.state }}%.'
        messages:
          - '–°–∏—Å—Ç–µ–º–Ω–∏–π –¥–∏—Å–∫ –∑–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è. –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ —Ñ–∞–π–ª–∏.'
          - '–ê–Ω–æ–º–∞–ª—å–Ω–æ –≤–µ–ª–∏–∫–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–Ω–æ—ó –ø–∞–º‚Äô—è—Ç—ñ.'
    - platform: numeric_state
      id: media_disk
      entity_id: sensor.disk_use_percent_media
      above: 90
      for:
        minutes: 1
      variables:
        greetings:
          - '–î–∏—Å–∫ –º–µ–¥—ñ–∞ –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π –Ω–∞ {{ trigger.to_state.state }}%.'
          - '–ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –¥–∏—Å–∫—É –º–µ–¥—ñ–∞ {{ trigger.to_state.state }}%.'
        messages:
          - '–î–∏—Å–∫ –¥–ª—è –º–µ–¥—ñ–∞ –∑–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è. –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ —Ñ–∞–π–ª–∏.'
          - '–ó–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ —Ñ–∞–π–ª—ñ–≤ –Ω–∞ –¥–∏—Å–∫—É –º–µ–¥—ñ–∞.'
  action:
    - service: script.announcement
      data:
        title: '–°–∏—Å—Ç–µ–º–Ω–∏–π –ø—ñ–∫ üî•'
        greetings: '{{ greetings }}'
        messages: '{{ greetings }}'
        notify_data:
          url: /lovelace/system
          group: system
    - delay:
        minutes: 10

- id: aqi_alert
  alias: AQI Alert
  mode: single
  trigger:
    - platform: numeric_state
      entity_id: sensor.outdoor_aqi
      above: 150
      below: 200
      for:
        minutes: 30
      variables:
        title: '–®–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è ü•¥'
        greetings:
          - '–†—ñ–≤–µ–Ω—å —è–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int(0) }}¬†AQI'
          - '–®–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è –Ω–∞–¥–≤–æ—Ä—ñ: {{ trigger.to_state.state | int(0) }}¬†AQI'
          - '–®–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int(0) }}¬†AQI'
          - '{{ trigger.to_state.state | int(0) }}¬†AQI.'
        messages:
          - '–ú–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç –ø—Ä–∏ –¥–∏—Ö–∞–Ω–Ω—ñ.'
          - '–°–ø—Ä–∏—á–∏–Ω—è—î –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç –ø—Ä–∏ –¥–∏—Ö–∞–Ω–Ω—ñ —É –∑–¥–æ—Ä–æ–≤–∏—Ö –ª—é–¥–µ–π.'
          - '–õ—é–¥—è–º —ñ–∑ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –ø–µ—Ä–µ–±—É–≤–∞—Ç–∏ –Ω–∞ –≤—É–ª–∏—Ü—ñ.'
          - '–ó–∞–Ω—è—Ç—Ç—è —Å–ø–æ—Ä—Ç–æ–º –Ω–∞ –≤—É–ª–∏—Ü—ñ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ.'
    - platform: numeric_state
      entity_id: sensor.outdoor_aqi
      above: 201
      below: 300
      for:
        minutes: 30
      variables:
        title: '–î—É–∂–µ —à–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è üò∑'
        greetings:
          - '–†—ñ–≤–µ–Ω—å —è–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int(0) }}¬†AQI'
          - '–ù–∞–¥–≤–æ—Ä—ñ –¥—É–∂–µ —à–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int(0) }}¬†AQI'
          - "–î—É–∂–µ —à–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è: {{ states('sensor.outdoor_aqi') | int(0) }}¬†AQI"
          - '{{ trigger.to_state.state | int(0) }}¬†AQI.'
        messages:
          - '–ú–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è —É –∑–¥–æ—Ä–æ–≤–∏—Ö –ª—é–¥–µ–π –ø—Ä–∏ —Ç—Ä–∏–≤–∞–ª–æ–º—É –≤–ø–ª–∏–≤—ñ.'
          - '–õ—é–¥—è–º —ñ–∑ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –ø–µ—Ä–µ–±—É–≤–∞—Ç–∏ –Ω–∞ –≤—É–ª–∏—Ü—ñ.'
          - '–†–∏–∑–∏–∫ —ñ–Ω—Å—É–ª—å—Ç—É —Ç–∞ —ñ–Ω—Ñ–∞—Ä–∫—Ç—É —É –ª—é–¥–µ–π –ø–æ—Ö–∏–ª–æ–≥–æ –≤—ñ–∫—É.'
          - '–ó–∞–Ω—è—Ç—Ç—è —Å–ø–æ—Ä—Ç–æ–º –Ω–∞ –≤—É–ª–∏—Ü—ñ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ.'
    - platform: numeric_state
      entity_id: sensor.outdoor_aqi
      above: 301
      for:
        minutes: 30
      variables:
        title: '–ù–µ–±–µ–∑–ø–µ—á–Ω–µ –ø–æ–≤—ñ—Ç—Ä—è ‚ò†Ô∏è'
        greetings:
          - '–†—ñ–≤–µ–Ω—å —è–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int(0) }}¬†AQI'
          - '–ù–∞–¥–≤–æ—Ä—ñ –Ω–µ–±–µ–∑–ø–µ—á–Ω–µ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int(0) }}¬†AQI'
          - '–ù–µ–±–µ–∑–ø–µ—á–Ω–µ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int(0) }}¬†AQI'
          - '{{ trigger.to_state.state | int(0) }}¬†AQI.'
        messages:
          - '–¶–µ –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ –¥–ª—è –∑–¥–æ—Ä–æ–≤‚Äô—è!'
          - '–ó–∞–ª–∏—à–∞–π—Ç–µ—Å—å –≤–¥–æ–º–∞!'
          - '–ù–µ –≤–∏—Ö–æ–¥—å—Ç–µ –Ω–∞ –≤—É–ª–∏—Ü—é!'
          - '–ó–∞—á–∏–Ω—ñ—Ç—å –≤—ñ–∫–Ω–∞!'
          - '–°–µ—Ä–π–æ–∑–Ω–∏–π –≤–ø–ª–∏–≤ –Ω–∞–≤—ñ—Ç—å –Ω–∞ –∑–¥–æ—Ä–æ–≤–∏—Ö –ª—é–¥–µ–π!'
          - '–ú–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ —Å–µ—Ä–π–æ–∑–Ω—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏ –¥–ª—è –∑–¥–æ—Ä–æ–≤‚Äô—è!'
          - '–õ—é–¥—è–º —ñ–∑ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –ø–µ—Ä–µ–±—É–≤–∞—Ç–∏ –Ω–∞ –≤—É–ª–∏—Ü—ñ.'
          - '–Ü—Å–Ω—É—î —Ä–∏–∑–∏–∫ —ñ–Ω—Å—É–ª—å—Ç—É —Ç–∞ —ñ–Ω—Ñ–∞—Ä–∫—Ç—É!'
          - '–ù–µ–≥–∞—Ç–∏–≤–Ω—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏ –Ω–∞–≤—ñ—Ç—å –ø—ñ–¥ —á–∞—Å –ª–µ–≥–∫–æ—ó –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ!'
  action:
    - service: script.announcement
      data:
        title: '{{ title }}'
        greetings: '{{ greetings }}'
        messages: '{{ messages }}'
        notify_data:
          url: /lovelace/city
    - delay:
        hours: 2

- id: torrent_completed_notification
  alias: Notify about completed torrent
  trigger:
    platform: event
    event_type: transmission_downloaded_torrent
  action:
    - service: script.announcement
      data:
        title: 'Transmission ‚¨áÔ∏è'
        speak: false
        messages:
          - '–¢–æ—Ä—Ä–µ–Ω—Ç {{ trigger.event.data.name }} –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!'
          - '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ —Ç–æ—Ä—Ä–µ–Ω—Ç {{ trigger.event.data.name }}!'
          - '–¢–æ—Ä—Ä–µ–Ω—Ç {{ trigger.event.data.name }} –≤–∏–∫–∞—á–∞–Ω–∏–π!'
          - '–¢–æ—Ä—Ä–µ–Ω—Ç {{ trigger.event.data.name }} –≥–æ—Ç–æ–≤–∏–π!'
        notify_data:
          url: /torrents
          group: system

- id: unavailable_devices_notifications
  alias: Unavailable Devices Alert
  trigger:
    platform: numeric_state
    entity_id: sensor.unavailable_devices
    above: 0
    for:
      minutes: 1
  condition:
    - condition: state
      entity_id: group.family
      state: home
  action:
    - service: script.announcement
      data:
        speak: false
        title: '–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó üîå'
        greetings:
          - '–£ {{ trigger.to_state.attributes.entities_names | join(", ") }} –Ω–µ–º–∞—î –∑‚Äô—è–∑–∫—É –∑ —Ä–æ–∑—É–º–Ω–∏–º –¥–æ–º–æ–º!'
          - '–ù–µ–º–∞—î –∑–≤‚Äô—è–∑–∫—É –∑ {{ trigger.to_state.attributes.entities_names | join(", ") }}!'
          - '–ó–Ω–∏–∫ –∑–≤‚Äô—è–∑–æ–∫ –∑ {{ trigger.to_state.attributes.entities_names | join(", ") }}!'
          - '–í—Ç—Ä–∞—Ç–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ {{ trigger.to_state.attributes.entities_names | join(", ") }}!'
        messages:
          - '–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –º–æ–∂–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏.'
          - '–°–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏.'
          - '–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∞–±–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å.'
          - '–ü–µ—Ä–µ–ø—ñ–¥–∫–ª—é—á—ñ—Ç—å –∞–±–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å.'
          - '–°–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏.'
        notify_data:
          group: system

- id: humidifier_no_water
  alias: Humidifier No Water
  description: Notify when humidifier's water tank is empty
  trigger:
    platform: state
    entity_id: binary_sensor.air_humidifier_water_tank_empty
    to: 'on'
  action:
    - service: script.announcement
      data:
        title: '–ó–≤–æ–ª–æ–∂—É–≤–∞—á üí¶'
        messages:
          - '–ù–∞–ø–æ–≤–Ω—ñ—Ç—å –±–∞–∫ –∑–≤–æ–ª–æ–∂—É–≤–∞—á–∞ –≤–æ–¥–æ—é!'
          - '–£ –∑–≤–æ–ª–æ–∂—É–≤–∞—á—ñ –∑–∞–∫—ñ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ ‚Äî –Ω–∞–±–µ—Ä—ñ—Ç—å –Ω–æ–≤—É!'
          - '–ù–∞–±–µ—Ä—ñ—Ç—å –Ω–æ–≤–æ—ó –≤–æ–¥–∏ —É –∑–≤–æ–ª–æ–∂—É–≤–∞—á!'
          - '–ü–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–±—Ä–∞—Ç–∏ –≤–æ–¥—É —É –∑–≤–æ–ª–æ–∂—É–≤–∞—á!'
          - '–ó–≤–æ–ª–æ–∂—É–≤–∞—á –ø–æ—Ä–æ–∂–Ω—ñ–π. –ù–∞–±–µ—Ä—ñ—Ç—å –Ω–æ–≤–æ—ó –≤–æ–¥–∏.'
          - '–ü–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–ø–æ–≤–Ω–∏—Ç–∏ –±–∞–∫ –∑–≤–æ–ª–æ–∂—É–≤–∞—á–∞.'
          - '–ë–∞–∫ –∑–≤–æ–ª–æ–∂—É–≤–∞—á–∞ —Å–ø–æ—Ä–æ–∂–Ω—ñ–≤.'
        notify_data:
          url: /lovelace/bedroom

- id: car_washing_alert
  alias: Car Washing Alert
  trigger:
    - platform: state
      entity_id: binary_sensor.car_wash
      to: 'on'
      for:
        hours: 24
      variables:
        title: '–ú–∏—Ç—Ç—è –∞–≤—Ç–æ üöò‚òÄÔ∏è'
        greetings:
          - '–ù–∞–π–±–ª–∏–∂—á–∏–º–∏ –¥–Ω—è–º–∏ –æ—á—ñ–∫—É—î—Ç—å—Å—è —Ö–æ—Ä–æ—à–∞ –ø–æ–≥–æ–¥–∞.'
          - '–•–æ—Ä–æ—à–∞ –ø–æ–≥–æ–¥–∞ –Ω–∞–π–±–ª–∏–∂—á—ñ 7 –¥–Ω—ñ–≤.'
          - '–ü—Ä–æ–≥–Ω–æ–∑—É—î—Ç—å—Å—è —Ö–æ—Ä–æ—à–∞ –ø–æ–≥–æ–¥–∞!'
          - '–ü–æ–ø–µ—Ä–µ–¥—É –≥–∞—Ä–Ω–∞ –ø–æ–≥–æ–¥–∞!'
        messages:
          - '–î–æ—Ä–µ—á–Ω–æ –ø–æ–º–∏—Ç–∏ –º–∞—à–∏–Ω—É.'
          - '–ú–æ–∂–Ω–∞ –ø–æ–º–∏—Ç–∏ –∞–≤—Ç–æ.'
          - '–í–∞—Ä—Ç–æ –ø–æ—ó—Ö–∞—Ç–∏ –Ω–∞ –∞–≤—Ç–æ–º–∏–π–∫—É.'
          - '–í–¥–∞–ª–∏–π —á–∞—Å, —â–æ–± –ø–æ–º–∏—Ç–∏ –∞–≤—Ç–æ.'
    - platform: state
      entity_id: binary_sensor.car_wash
      to: 'off'
      for:
        hours: 24
      variables:
        title: '–ú–∏—Ç—Ç—è –∞–≤—Ç–æ üöòüåß'
        greetings:
          - '–ù–∞–π–±–ª–∏–∂—á–∏–º–∏ –¥–Ω—è–º–∏ –æ—á—ñ–∫—É—î—Ç—å—Å—è –ø–æ–≥–∞–Ω–∞ –ø–æ–≥–æ–¥–∞.'
          - '–ü–æ–≥–∞–Ω–∞ –ø–æ–≥–æ–¥–∞ –Ω–∞–π–±–ª–∏–∂—á—ñ 7 –¥–Ω—ñ–≤.'
          - '–ü—Ä–æ–≥–Ω–æ–∑—É—î—Ç—å—Å—è –ø–æ–≥–∞–Ω–∞ –ø–æ–≥–æ–¥–∞!'
          - '–ü–æ–ø–µ—Ä–µ–¥—É –¥–æ—â–æ–≤–∞ –ø–æ–≥–æ–¥–∞!'
        messages:
          - '–£—Ç—Ä–∏–º–∞–π—Ç–µ—Å—å –≤—ñ–¥ –º–∏—Ç—Ç—è –∞–≤—Ç–æ.'
          - '–ù–µ –≤–∞—Ä—Ç–æ –º–∏—Ç–∏ –∞–≤—Ç–æ —Ü–∏–º–∏ –¥–Ω—è–º–∏.'
          - '–ö—Ä–∞—â–µ –∑–∞–ª–∏—à–∏—Ç–∏ –∞–≤—Ç–æ –±—Ä—É–¥–Ω–∏–º.'
  action:
    - service: script.announcement
      data:
        speak: false
        title: '{{ title }}'
        greetings: '{{ greetings }}'
        messages: '{{ messages }}'
        notify_data:
          url: /lovelace/car
          group: car

- id: snow_tire_alert
  alias: Snow Tire Alert
  trigger:
    - platform: state
      entity_id: binary_sensor.snowtire
      to: 'on'
      for:
        hours: 24
    - platform: state
      entity_id: binary_sensor.snowtire
      to: 'off'
      for:
        hours: 24
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.snowtire
              state: 'on'
            - alias: 'Only in the fall'
              condition: template
              value_template: '{{ now().month in [9, 10, 11] }}'
          sequence:
            - service: script.announcement
              data:
                speak: false
                title: '–ó–∏–º–æ–≤—ñ —à–∏–Ω–∏ üöò‚ùÑÔ∏è'
                greetings:
                  - '–ù–∞–π–±–ª–∏–∂—á–∏–º–∏ –¥–Ω—è–º–∏ –ø–æ–≥—ñ—Ä—à–µ–Ω–Ω—è –ø–æ–≥–æ–¥–∏.'
                  - '–°–∫–æ—Ä–æ –Ω–∞—Å—Ç–∞–Ω–µ –∑–∏–º–∞.'
                  - '–ó–∏–º–∞ –±–ª–∏–∑—å–∫–æ!'
                  - '–ü–æ–ø–µ—Ä–µ–¥—É –ø–æ–≥—ñ—Ä—à–µ–Ω–Ω—è –ø–æ–≥–æ–¥–∏!'
                messages:
                  - '–ß–∞—Å –ø–µ—Ä–µ–≤–∑—É—Ç–∏ –º–∞—à–∏–Ω—É –Ω–∞ –∑–∏–º–æ–≤—ñ —à–∏–Ω–∏.'
                  - '–î–æ—Ä–µ—á–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ —à–∏–Ω–∏ –Ω–∞ –∑–∏–º–æ–≤—ñ.'
                  - '–í–∞—Ä—Ç–æ –ø–æ—ó—Ö–∞—Ç–∏ –Ω–∞ —à–∏–Ω–æ–º–æ–Ω—Ç–∞–∂ –¥–ª—è –∑–∞–º—ñ–Ω–∏ —à–∏–Ω.'
                notify_data:
                  url: /lovelace/car
                  group: car
        - conditions:
            - condition: state
              entity_id: binary_sensor.snowtire
              state: 'off'
            - alias: 'Only in the spring'
              condition: template
              value_template: '{{ now().month in [3, 4, 5] }}'
          sequence:
            - service: script.announcement
              data:
                speak: false
                title: '–õ—ñ—Ç–Ω—ñ —à–∏–Ω–∏ üöòüå§'
                greetings:
                  - '–ù–∞–π–±–ª–∏–∂—á–∏–º–∏ –¥–Ω—è–º–∏ —Å—Ç—Ä—ñ–º–∫–µ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø–æ–≥–æ–¥–∏.'
                  - '–õ—ñ—Ç–æ –Ω–∞ –Ω–æ—Å—ñ!'
                  - '–ù–∞—Ä–µ—à—Ç—ñ –≤–µ—Å–Ω–∞!'
                  - '–ü–æ–ø–µ—Ä–µ–¥—É –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø–æ–≥–æ–¥–∏!'
                messages:
                  - '–ß–∞—Å –ø–µ—Ä–µ–≤–∑—É—Ç–∏ –º–∞—à–∏–Ω—É –Ω–∞ –ª—ñ—Ç–Ω—ñ —à–∏–Ω–∏.'
                  - '–î–æ—Ä–µ—á–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ —à–∏–Ω–∏ –Ω–∞ –ª—ñ—Ç–Ω—ñ.'
                  - '–í–∞—Ä—Ç–æ –ø–æ—ó—Ö–∞—Ç–∏ –Ω–∞ —à–∏–Ω–æ–º–æ–Ω—Ç–∞–∂ –¥–ª—è –∑–∞–º—ñ–Ω–∏ —à–∏–Ω.'
                notify_data:
                  url: /lovelace/car
                  group: car

- id: fayna_progress
  alias: Fayna Town Progress Alert
  trigger:
    - platform: template
      value_template: >-
        {{ (states('sensor.fayna_progress') | float(1)) % 1 == 0 }}
      variables:
        greetings:
          - "–ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–∞ {{ states('sensor.fayna_progress') | int(0) }}%."
          - "–ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å {{ states('sensor.fayna_progress') | int(0) }}%."
          - "–ë—É–¥–∏–Ω–æ–∫ –≥–æ—Ç–æ–≤–∏–π –Ω–∞ {{ states('sensor.fayna_progress') | int(0) }}%."
          - "–ë—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ –ø—Ä–æ—Å—É–Ω—É–ª–æ—Å—å –Ω–∞ {{ states('sensor.fayna_progress') | int(0) }}%."
        messages:
          - "–ó–∞–ª–∏—à–∏–ª–æ—Å—å —á–µ–∫–∞—Ç–∏ {{ states('sensor.fayna_days_left') }}, –∞ –ø—Ä–æ–π—à–ª–æ –≤–∂–µ {{ states('sensor.fayna_days_past') }} –¥–Ω—ñ–≤."
          - "–ó–∞–ª–∏—à–∏–ª–æ—Å—å {{ states('sensor.fayna_days_left') }} –¥–Ω—ñ–≤. –ü—Ä–æ–π—à–ª–æ {{ states('sensor.fayna_days_past') }}."
          - "–ü—Ä–æ–π—à–ª–æ –≤–∂–µ {{ states('sensor.fayna_days_past') }} –¥–Ω—ñ–≤. –ó–∞–ª–∏—à–∏–ª–æ—Å—å {{ states('sensor.fayna_days_left') }}."
          - "{{ states('sensor.fayna_days_past') }} –¥–Ω—ñ–≤ –ø—Ä–æ–π—à–ª–æ. {{ states('sensor.fayna_days_left') }} –∑–∞–ª–∏—à–∏–ª–æ—Å—å."
    - platform: template
      value_template: >-
        {{ (states('sensor.fayna_days_past') | float(1)) % 50 == 0 }}
      variables:
        greetings:
          - "–ü—Ä–æ–π—à–ª–æ –≤–∂–µ {{ states('sensor.fayna_days_past') }} –¥–Ω—ñ–≤ –∑ –¥–Ω—è –∫—É–ø—ñ–≤–ª—ñ –∫–≤–∞—Ä—Ç–∏—Ä–∏."
          - "–ü—Ä–æ–π—à–ª–æ {{ states('sensor.fayna_days_past') }} –¥–Ω—ñ–≤ –≤—ñ–¥ –¥–Ω—è –∫—É–ø—ñ–≤–ª—ñ –∫–≤–∞—Ä—Ç–∏—Ä–∏."
          - "–ü—Ä–æ–π—à–ª–æ {{ states('sensor.fayna_days_past') }} –¥–Ω—ñ–≤."
        messages:
          - "–ó–∞–ª–∏—à–∏–ª–æ—Å—å —á–µ–∫–∞—Ç–∏ {{ states('sensor.fayna_days_left') }}."
          - "–ó–∞–ª–∏—à–∏–ª–æ—Å—å {{ states('sensor.fayna_days_left') }} –¥–Ω—ñ–≤."
          - "–ó–∞–ª–∏—à–∏–ª–æ—Å—å {{ states('sensor.fayna_days_left') }}."
          - "{{ states('sensor.fayna_days_left') }} –∑–∞–ª–∏—à–∏–ª–æ—Å—å."
  action:
    - service: script.announcement
      data:
        title: '–§–∞–π–Ω–∞ –¢–∞—É–Ω üèô'
        greetings: '{{ greetings }}'
        messages: '{{ messages }}'
        notify_data:
          url: /lovelace/observation

- id: monthly_energy_alert
  alias: Monthy Energy Usage Alert
  description: Switch energy tariff and notify about the consumption
  trigger:
    - platform: numeric_state
      entity_id: sensor.energy_monthly_total
      below: 0.01
      variables:
        greetings:
          - –ú–∏–Ω—É–ª–æ–≥–æ –º—ñ—Å—è—Ü—è —Å–ø–æ–∂–∏—Ç–æ {{ trigger.from_state.state }}kWh
          - –ú–∏–Ω—É–ª–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É –≤–∏ —Å–ø–æ–∂–∏–ª–∏ {{ trigger.from_state.state }}kWh
          - –ü–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –º—ñ—Å—è—Ü—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ {{ trigger.from_state.state }}kWh
          - –ü–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ {{ trigger.from_state.state }}kWh
        messages:
          - –Ω–∞ {{ state_attr('sensor.monthly_energy_cost', 'last_period') | float(0) | round(2) }}‚Ç¥.
          - –∑–∞ {{ state_attr('sensor.monthly_energy_cost', 'last_period') | float(0) | round(2) }}‚Ç¥.
    - platform: numeric_state
      entity_id: sensor.energy_monthly_total
      above: 250
      variables:
        greetings:
          - –°–ø–æ–∂–∏—Ç–æ –ø–æ–Ω–∞–¥ 250kWh –∑–∞ –º—ñ—Å—è—Ü—å.
          - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –±—ñ–ª—å—à–µ 250kWh –∑–∞ –º—ñ—Å—è—Ü—å.
          - –í–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–ª–∏ –µ–ª–µ–∫—Ç—Ä–∏–∫—É –±—ñ–ª—å—à–µ 250kWh –∑–∞ –º—ñ—Å—è—Ü—å.
        messages:
          - –ù–∞–¥–∞–ª—ñ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –≤–∏—â–∏–π —Ç–∞—Ä–∏—Ñ.
          - –î–∞–ª—ñ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –ø—ñ–¥–≤–∏—â–µ–Ω–∏–π —Ç–∞—Ä–∏—Ñ.
  action:
    - service: script.announcement
      data:
        title: –ï–ª–µ–∫—Ç—Ä–∏–∫–∞ ‚ö°Ô∏è
        speak: false
        service: notify.denys
        greetings: '{{ greetings }}'
        messages: '{{ messages }}'
        notify_data:
          url: /energy

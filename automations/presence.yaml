- id: everyone_is_arriving
  alias: Everyone is Arriving
  description: Turn on things when people are arriving
  trigger:
    platform: state
    entity_id: group.family
    from: 'not_home'
    to: 'home'
  action:
    # Wait for someone to come
    - wait_for_trigger:
        - platform: state
          entity_id: binary_sensor.front_door_sensor_contact
          to: 'on'
        - platform: state
          entity_id: binary_sensor.living_room_movement_sensor_occupancy
          to: 'on'
        - platform: state
          entity_id: binary_sensor.bedroom_movement_sensor_occupancy
          to: 'on'
      timeout: '01:00:00'
      continue_on_timeout: false
    - service: script.everyone_is_arriving

- id: everyone_is_leaving
  alias: Everyone is Leaving
  description: Turn off things when people are leaving
  trigger:
    platform: state
    entity_id: group.family
    from: 'home'
    to: 'not_home'
    for: '00:10:00'
  action:
    - service: script.everyone_is_leaving

silent_mode:
  alias: Silence Mode
  sequence:
    - service: fan.set_preset_mode
      target:
        entity_id: fan.air_purifier
      data:
        preset_mode: Silent

    - service: xiaomi_miio_airpurifier.fan_set_led_off
      entity_id: fan.humidifier

    - service: media_player.volume_set
      data:
        entity_id: media_player.all_speakers
        volume_level: 0.25

activity_mode:
  alias: Activity Mode
  sequence:
    - service: fan.set_preset_mode
      target:
        entity_id: fan.air_purifier
      data:
        preset_mode: Auto

    - service: xiaomi_miio_airpurifier.fan_set_led_on
      entity_id: fan.humidifier

    - service: media_player.volume_set
      data:
        entity_id: media_player.all_speakers
        volume_level: 0.75

do_not_disturb_mode:
  alias: Do Not Disturb Mode
  sequence:
    - choose:
        - conditions:
            - condition: state
              entity_id: input_boolean.do_not_disturb
              state: 'on'
          sequence:
            - service: script.silent_mode
        - conditions:
            - condition: state
              entity_id: input_boolean.do_not_disturb
              state: 'off'
          sequence:
            - service: script.activity_mode
